<!DOCTYPE html>
<html lang="en">

<head>
  <title>curlLoad - page404.info</title>
  <meta name="description" content="Проверка времени ответа.">
  <link rel="icon" type="image/png" href="favicon-curlload.png">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<body>
  <header>
    <h1 class="text-center mt-5 text-primary">curlLoad</h1>
  </header>

  <main>
    <div class="container mt-4">
      <div class="row">
        <div class="col-12 mb-3">
          <ul>
            <li><a href="https://gist.github.com/subfuzion/08c5d85437d5d4f00e58" target="_blank"
                rel="noopener noreferrer">curl options</a></li>
            <li>change SITE-NAME / ENDPOINT / WORD & run in a terminal</li>
          </ul>
        </div>
        <div class="col-md-6 col-12">
          <p class="mb-0"><b>Get response size</b> (byte)</p>
          <p>curl -s 'https://SITE-NAME' | wc -c</p>
        </div>
        <div class="col-md-6 col-12">
          <p class="mb-0"><b>Get response heads</b></p>
          <p>curl -X HEAD -I 'https://SITE-NAME'</p>
        </div>
        <div class="col-md-6 col-12">
          <p class="mb-0"><b>Get uniq count</b> (<span style="color: red;"
              title="Команда sort | uniq -c | sort -nr выводит статистику встречаемости строк. Ключ -nr означает сортировку в порядке убывания.">info</span>)
          </p>
          <p>curl 'https://ENDPOINT' | awk 'BEGIN{RS=","}{print}' | grep 'WORD' | sort | uniq -c | sort -nr</p>
        </div>
        <div class="col-md-6 col-12">
          <p class="mb-0"><b>Get uniq count from file</b></p>
          <p>cat FILE-NAME | grep 'WORD' | awk '{print $8}' | sort | uniq -c | sort -nr >
            ~/uniqCountResult.txt</p>
        </div>
        <div class="col-12">
          <p class="mb-0"><b>Get response time</b> (sec)</p>
          <p>for i in {1..10}; do echo $i; curl 'https://SITE-NAME' --write-out '%{http_code} %{time_total}\n' --silent
            --output /dev/null; done;</p>

          <p class="mb-0"><b>Save response time to curlLoadResult.txt</b></p>
          <p>for i in {1..10}; do echo $i; curl 'https://SITE-NAME' --write-out '%{http_code} %{time_total}\n' --silent
            --output /dev/null >> curlLoadResult.txt; done; cat curlLoadResult.txt; awk '{ total += $2; count++ } END {
            print "\nMean: " total/count "\n" }' curlLoadResult.txt</p>

          <div class="row mt-5">
            <div class="col-12">
              <div class="form-floating">
                <textarea id="inputText" class="form-control" placeholder="Leave a comment here"
                  style="height: 270px; resize:none;"></textarea>
                <label for="inputText">Edit curl request</label>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </main>

  <footer>
    <div class="container border-top border-3 mt-5">
      <div class="row">
        <div class="col text-center">
          <p class="mt-3 mb-0"><a href="../tools-main.html">More tools</a></p>
          <p class="mt-0 mb-3">
            &copy; Valeriy Novikov, 2022
          </p>
        </div>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
</body>

</html>